# Миграции базы данных

## Добавление колонки promo (2025-01-27)

### Описание
Добавляем новую колонку `promo` типа `boolean` с дефолтным значением `null` в таблицу `cars` для обозначения промо-автомобилей.

### Изменения
- Добавлена колонка `promo` типа `boolean` с `nullable: true`
- Колонка размещена после `isSold` в структуре таблицы
- Обновлены все интерфейсы и мапперы для поддержки нового поля

### Выполнение миграции

#### Автоматически (рекомендуется)
При следующем запуске приложения TypeORM автоматически синхронизирует схему и добавит колонку `promo`.

#### Вручную
```bash
# Подключитесь к базе данных и выполните:
mysql -u username -p database_name < migrations/add_promo_column.sql
```

### Проверка
После выполнения миграции убедитесь, что:
1. Колонка `promo` добавлена в таблицу `cars`
2. Колонка имеет тип `boolean` и может быть `null`
3. Приложение запускается без ошибок
4. Новое поле доступно в API и клиентах

---

## Удаление колонки sale (2025-01-27)

### Описание
Удаляем дублирующую колонку `sale` из таблицы `cars`, оставляем только `isSold` для определения статуса продажи автомобиля.

### Изменения
- Удалена колонка `sale` из таблицы `cars`
- Оставлена только колонка `isSold` для определения статуса продажи
- Обновлены все интерфейсы и сервисы для использования только `isSold`

### Выполнение миграции

#### Автоматически (рекомендуется)
При следующем запуске приложения TypeORM автоматически синхронизирует схему и удалит колонку `sale`.

#### Вручную
```bash
# Подключитесь к базе данных и выполните:
mysql -u username -p database_name < migrations/remove_sale_column.sql
```

### Проверка
После выполнения миграции убедитесь, что:
1. Колонка `sale` удалена из таблицы `cars`
2. Колонка `isSold` остается и работает корректно
3. Приложение запускается без ошибок
4. Все функции продажи/доступности автомобилей работают через `isSold`

### Откат (если необходимо)
```sql
ALTER TABLE cars ADD COLUMN sale BOOLEAN DEFAULT FALSE;
UPDATE cars SET sale = isSold;
```
